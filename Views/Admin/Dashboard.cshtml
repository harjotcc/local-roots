@model local_roots.Models.Admin

@{
    ViewData["Title"] = "Admin Dashboard";
}

<style>
    .dashboard-container {
        display: flex;
        min-height: 80vh;
    }
    .sidebar {
        width: 220px;
        background-color: #f8f9fa;
        padding: 20px;
        border-right: 1px solid #ddd;
    }
    .sidebar button {
        width: 100%;
        margin-bottom: 10px;
        padding: 10px;
        border: none;
        background-color: transparent;
        text-align: left;
        font-size: 16px;
        cursor: pointer;
        border-radius: 4px;
    }
    .sidebar button.active, .sidebar button:hover {
        background-color: #42D3B9;
        color: white;
    }
    .content-area {
        flex-grow: 1;
        padding: 20px;
        overflow-x: auto;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 30px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        vertical-align: middle;
    }
    th {
        background-color: #42D3B9;
        color: white;
    }
    .btn-sm {
        padding: 4px 8px;
        font-size: 0.8rem;
        margin-right: 5px;
        border-radius: 4px;
        text-decoration: none;
        display: inline-block;
    }
    .btn-info { background-color: #17a2b8; color: white; }
    .btn-primary { background-color: #007bff; color: white; }
    .btn-danger { background-color: #dc3545; color: white; }
    .btn-info:hover, .btn-primary:hover, .btn-danger:hover {
        opacity: 0.85;
    }
</style>

<h2>Welcome, @Model.Email</h2>

<div class="dashboard-container">
    <nav class="sidebar" role="navigation" aria-label="Admin menu">
        <button class="tablink active" onclick="showTab(event, 'users')">Users</button>
        <button class="tablink" onclick="showTab(event, 'orders')">Orders</button>
        <button class="tablink" onclick="showTab(event, 'reviews')">Reviews</button>
        <button class="tablink" onclick="showTab(event, 'products')">Products</button>
    </nav>

    <section class="content-area">
        <!-- Users Tab -->
        <div id="users" class="tabcontent" style="display:block;">
            <h3>Users</h3>

            <h4>Customers</h4>
            <table>
                <thead>
                    <tr>
                        <th>UserId</th>
                        <th>Email</th>
                        <th>FullName</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var customer in ViewBag.Customers as List<local_roots.Models.Customer>)
                    {
                        <tr>
                            <td>@customer.UserId</td>
                            <td>@customer.Email</td>
                            <td>@customer.FullName</td>
                            <td>
                                <a asp-controller="Customer" asp-action="Details" asp-route-id="@customer.UserId" class="btn-sm btn-info">View</a>
                                <a asp-controller="Customer" asp-action="Edit" asp-route-id="@customer.UserId" class="btn-sm btn-primary">Edit</a>
                                <a asp-controller="Customer" asp-action="Delete" asp-route-id="@customer.UserId" class="btn-sm btn-danger" onclick="return confirm('Delete this customer?');">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <h4>Vendors</h4>
            <table>
                <thead>
                    <tr>
                        <th>UserId</th>
                        <th>Email</th>
                        <th>StoreName</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var seller in ViewBag.Sellers as List<local_roots.Models.Seller>)
                    {
                        <tr>
                            <td>@seller.UserId</td>
                            <td>@seller.Email</td>
                            <td>@seller.StoreName</td>
                            <td>
                                <a asp-controller="Seller" asp-action="Details" asp-route-id="@seller.UserId" class="btn-sm btn-info">View</a>
                                <a asp-controller="Seller" asp-action="Edit" asp-route-id="@seller.UserId" class="btn-sm btn-primary">Edit</a>
                                <a asp-controller="Seller" asp-action="Delete" asp-route-id="@seller.UserId" class="btn-sm btn-danger" onclick="return confirm('Delete this vendor?');">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Orders Tab -->
        <div id="orders" class="tabcontent" style="display:none;">
            <h3>Orders</h3>
            <table>
                <thead>
                    <tr>
                        <th>OrderId</th>
                        <th>OrderDate</th>
                        <th>Status</th>
                        <th>TotalPrice</th>
                        <th>CustomerId</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var order in ViewBag.Orders as List<local_roots.Models.Order>)
                    {
                        <tr>
                            <td>@order.OrderId</td>
                            <td>@order.OrderDate.ToShortDateString()</td>
                            <td>@order.Status</td>
                            <td>@order.TotalPrice</td>
                            <td>@order.CustomerId</td>
                            <td>
                                <a asp-controller="Order" asp-action="Details" asp-route-id="@order.OrderId" class="btn-sm btn-info">View</a>
                                <a asp-controller="Order" asp-action="Edit" asp-route-id="@order.OrderId" class="btn-sm btn-primary">Edit</a>
                                <a asp-controller="Order" asp-action="Delete" asp-route-id="@order.OrderId" class="btn-sm btn-danger" onclick="return confirm('Delete this order?');">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Reviews Tab -->
        <div id="reviews" class="tabcontent" style="display:none;">
            <h3>Reviews</h3>
            <table>
                <thead>
                    <tr>
                        <th>ReviewId</th>
                        <th>Rating</th>
                        <th>Comment</th>
                        <th>Date</th>
                        <th>CustomerId</th>
                        <th>ProductId</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var review in ViewBag.Reviews as List<local_roots.Models.Review>)
                    {
                        <tr>
                            <td>@review.ReviewId</td>
                            <td>@review.Rating</td>
                            <td>@review.Comment</td>
                            <td>@review.Date.ToShortDateString()</td>
                            <td>@review.CustomerId</td>
                            <td>@review.ProductId</td>
                            <td>
                                <a asp-controller="Review" asp-action="Details" asp-route-id="@review.ReviewId" class="btn-sm btn-info">View</a>
                                <a asp-controller="Review" asp-action="Edit" asp-route-id="@review.ReviewId" class="btn-sm btn-primary">Edit</a>
                                <a asp-controller="Review" asp-action="Delete" asp-route-id="@review.ReviewId" class="btn-sm btn-danger" onclick="return confirm('Delete this review?');">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Products Tab -->
        <div id="products" class="tabcontent" style="display:none;">
            <h3>Products</h3>
            <table>
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Stock</th>
                        <th>Category</th>
                        <th>SellerId</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var product in ViewBag.Products as List<local_roots.Models.Product>)
                    {
                        <tr>
                            <td>@product.Id</td>
                            <td>@product.Name</td>
                            <td>@product.Description</td>
                            <td>@product.Price</td>
                            <td>@product.Stock</td>
                            <td>@product.Category</td>
                            <td>@product.SellerId</td>
                            <td>
                                <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id" class="btn-sm btn-info">View</a>
                                <a asp-controller="Product" asp-action="Edit" asp-route-id="@product.Id" class="btn-sm btn-primary">Edit</a>
                                <a asp-controller="Product" asp-action="Delete" asp-route-id="@product.Id" class="btn-sm btn-danger" onclick="return confirm('Delete this product?');">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </section>
</div>

<script>
    function showTab(evt, tabName) {
        // Hide all tabcontent
        document.querySelectorAll('.tabcontent').forEach(tc => tc.style.display = 'none');

        // Remove active class from buttons
        document.querySelectorAll('.tablink').forEach(btn => btn.classList.remove('active'));

        // Show current tab and add active class
        document.getElementById(tabName).style.display = 'block';
        evt.currentTarget.classList.add('active');
    }
</script>
